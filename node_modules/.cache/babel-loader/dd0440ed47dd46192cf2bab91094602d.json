{"ast":null,"code":"import _regeneratorRuntime from \"/home/ducnhat/Code/x-files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ducnhat/Code/x-files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { updateObject } from '@/store/utility';\nimport { createContext } from 'react';\nimport { formatTime } from '@/utils/mixins';\nimport { axios } from '@/utils/axiosInstance';\nexport var BookingFormContext = createContext(null);\nexport var BookingFormStateInit = {\n  room: null,\n  coupon: '',\n  discount: 0,\n  price: null,\n  profile: null,\n  success: false\n};\nexport var BookingFormReducer = function BookingFormReducer(state, action) {\n  switch (action.type) {\n    case 'setRoom':\n      return updateObject(state, {\n        room: action.room,\n        price: action.price\n      });\n\n    case 'setCoupon':\n      return updateObject(state, {\n        coupon: action.coupon,\n        discount: action.discount\n      });\n\n    case 'removeCoupon':\n      return updateObject(state, {\n        coupon: '',\n        discount: 0\n      });\n\n    case 'setProfile':\n      return updateObject(state, {\n        profile: action.profile\n      });\n\n    case 'setSuccess':\n      return updateObject(state, {\n        success: action.success\n      });\n\n    default:\n      return state;\n  }\n};\nexport var priceCalculator =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(params, state) {\n    var additional_fee, discount, CI, CO, data, response, info;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            additional_fee = 0;\n            discount = 0;\n            CI = '';\n            CO = '';\n\n            try {\n              CI = formatTime(params.checkin, params.checkin_hour, params.checkin_minute);\n              CO = formatTime(params.checkout, params.checkout_hour, params.checkout_minute);\n            } catch (e) {\n              console.error(e);\n            }\n\n            data = {\n              room_id: params.hosting_id,\n              checkin: CI,\n              checkout: CO,\n              additional_fee: additional_fee,\n              number_of_guests: params.number_guests,\n              booking_type: params.booking_type,\n              price_discount: discount\n            }; // const response: AxiosRes<BookingPriceCalculatorRes> = await axios.post('bookings/price-calculator', data);\n\n            _context.next = 8;\n            return axios.post('bookings/calculate-price-with-specific-day-price', data);\n\n          case 8:\n            response = _context.sent;\n            _context.next = 11;\n            return axios.get(\"rooms/\".concat(params.hosting_id, \"?include=details,media,city,district\"));\n\n          case 11:\n            info = _context.sent;\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function priceCalculator(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var priceCalculate =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(params) {\n    var additional_fee, discount, CI, CO, data, res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            additional_fee = 0;\n            discount = 0;\n            CI = '';\n            CO = '';\n\n            try {\n              CI = formatTime(params.checkin, params.checkin_hour, params.checkin_minute);\n              CO = formatTime(params.checkout, params.checkout_hour, params.checkout_minute);\n            } catch (e) {\n              console.error(e);\n            }\n\n            data = {\n              room_id: params.hosting_id,\n              checkin: CI,\n              checkout: CO,\n              additional_fee: additional_fee,\n              number_of_guests: params.number_guests,\n              booking_type: params.booking_type,\n              price_discount: discount\n            }; // const res: AxiosRes<BookingPriceCalculatorRes> = await axios.post('bookings/price-calculator', data);\n\n            _context2.next = 8;\n            return axios.post('bookings/calculate-price-with-specific-day-price', data);\n\n          case 8:\n            res = _context2.sent;\n            return _context2.abrupt(\"return\", res.data);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function priceCalculate(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var getRoomBookingForm =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(params) {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return axios.get(\"rooms/\".concat(params.hosting_id, \"?include=details,media,city,district\"));\n\n          case 2:\n            res = _context3.sent;\n            return _context3.abrupt(\"return\", res.data);\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function getRoomBookingForm(_x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getProfile =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return axios.get('profile');\n\n          case 2:\n            res = _context4.sent;\n            return _context4.abrupt(\"return\", res.data);\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function getProfile() {\n    return _ref4.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/home/ducnhat/Code/x-files/src/store/context/Booking/BookingFormContext.tsx"],"names":["updateObject","createContext","formatTime","axios","BookingFormContext","BookingFormStateInit","room","coupon","discount","price","profile","success","BookingFormReducer","state","action","type","priceCalculator","params","additional_fee","CI","CO","checkin","checkin_hour","checkin_minute","checkout","checkout_hour","checkout_minute","e","console","error","data","room_id","hosting_id","number_of_guests","number_guests","booking_type","price_discount","post","response","get","info","priceCalculate","res","getRoomBookingForm","getProfile"],"mappings":";;AAAA,SAASA,YAAT,QAA6B,iBAA7B;AAEA,SAASC,aAAT,QAAwC,OAAxC;AACA,SAASC,UAAT,QAA2B,gBAA3B;AAIA,SAASC,KAAT,QAAsB,uBAAtB;AAGA,OAAO,IAAMC,kBAAkB,GAAGH,aAAa,CAA4B,IAA5B,CAAxC;AAsBP,OAAO,IAAMI,oBAAsC,GAAG;AACpDC,EAAAA,IAAI,EAAE,IAD8C;AAEpDC,EAAAA,MAAM,EAAE,EAF4C;AAGpDC,EAAAA,QAAQ,EAAE,CAH0C;AAIpDC,EAAAA,KAAK,EAAE,IAJ6C;AAKpDC,EAAAA,OAAO,EAAE,IAL2C;AAMpDC,EAAAA,OAAO,EAAE;AAN2C,CAA/C;AAsBP,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAA0BC,MAA1B,EAA0E;AAC1G,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,SAAL;AACE,aAAOf,YAAY,CAAmBa,KAAnB,EAA0B;AAC3CP,QAAAA,IAAI,EAAEQ,MAAM,CAACR,IAD8B;AAE3CG,QAAAA,KAAK,EAAEK,MAAM,CAACL;AAF6B,OAA1B,CAAnB;;AAIF,SAAK,WAAL;AACE,aAAOT,YAAY,CAAmBa,KAAnB,EAA0B;AAC3CN,QAAAA,MAAM,EAAEO,MAAM,CAACP,MAD4B;AAE3CC,QAAAA,QAAQ,EAAEM,MAAM,CAACN;AAF0B,OAA1B,CAAnB;;AAIF,SAAK,cAAL;AACE,aAAOR,YAAY,CAAmBa,KAAnB,EAA0B;AAC3CN,QAAAA,MAAM,EAAE,EADmC;AAE3CC,QAAAA,QAAQ,EAAE;AAFiC,OAA1B,CAAnB;;AAIF,SAAK,YAAL;AACE,aAAOR,YAAY,CAAmBa,KAAnB,EAA0B;AAC3CH,QAAAA,OAAO,EAAEI,MAAM,CAACJ;AAD2B,OAA1B,CAAnB;;AAGF,SAAK,YAAL;AACE,aAAOV,YAAY,CAAmBa,KAAnB,EAA0B;AAC3CF,QAAAA,OAAO,EAAEG,MAAM,CAACH;AAD2B,OAA1B,CAAnB;;AAGF;AACE,aAAOE,KAAP;AAzBJ;AA2BD,CA5BM;AA8BP,OAAO,IAAMG,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,iBAAOC,MAAP,EAAmCJ,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBK,YAAAA,cADyB,GACR,CADQ;AAEzBV,YAAAA,QAFyB,GAEd,CAFc;AAGzBW,YAAAA,EAHyB,GAGpB,EAHoB;AAIzBC,YAAAA,EAJyB,GAIpB,EAJoB;;AAK7B,gBAAI;AACFD,cAAAA,EAAE,GAAGjB,UAAU,CAACe,MAAM,CAACI,OAAR,EAAiBJ,MAAM,CAACK,YAAxB,EAAsCL,MAAM,CAACM,cAA7C,CAAf;AACAH,cAAAA,EAAE,GAAGlB,UAAU,CAACe,MAAM,CAACO,QAAR,EAAkBP,MAAM,CAACQ,aAAzB,EAAwCR,MAAM,CAACS,eAA/C,CAAf;AACD,aAHD,CAGE,OAAOC,CAAP,EAAU;AACVC,cAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD;;AAEKG,YAAAA,IAZuB,GAYW;AACtCC,cAAAA,OAAO,EAAEd,MAAM,CAACe,UADsB;AAEtCX,cAAAA,OAAO,EAAEF,EAF6B;AAGtCK,cAAAA,QAAQ,EAAEJ,EAH4B;AAItCF,cAAAA,cAAc,EAAEA,cAJsB;AAKtCe,cAAAA,gBAAgB,EAAEhB,MAAM,CAACiB,aALa;AAMtCC,cAAAA,YAAY,EAAElB,MAAM,CAACkB,YANiB;AAOtCC,cAAAA,cAAc,EAAE5B;AAPsB,aAZX,EAsB7B;;AAtB6B;AAAA,mBAuB+BL,KAAK,CAACkC,IAAN,CAAW,kDAAX,EAA+DP,IAA/D,CAvB/B;;AAAA;AAuBvBQ,YAAAA,QAvBuB;AAAA;AAAA,mBAwBcnC,KAAK,CAACoC,GAAN,iBAAmBtB,MAAM,CAACe,UAA1B,0CAxBd;;AAAA;AAwBvBQ,YAAAA,IAxBuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAfxB,eAAe;AAAA;AAAA;AAAA,GAArB;AA4BP,OAAO,IAAMyB,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOxB,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACxBC,YAAAA,cADwB,GACP,CADO;AAExBV,YAAAA,QAFwB,GAEb,CAFa;AAGxBW,YAAAA,EAHwB,GAGnB,EAHmB;AAIxBC,YAAAA,EAJwB,GAInB,EAJmB;;AAK5B,gBAAI;AACFD,cAAAA,EAAE,GAAGjB,UAAU,CAACe,MAAM,CAACI,OAAR,EAAiBJ,MAAM,CAACK,YAAxB,EAAsCL,MAAM,CAACM,cAA7C,CAAf;AACAH,cAAAA,EAAE,GAAGlB,UAAU,CAACe,MAAM,CAACO,QAAR,EAAkBP,MAAM,CAACQ,aAAzB,EAAwCR,MAAM,CAACS,eAA/C,CAAf;AACD,aAHD,CAGE,OAAOC,CAAP,EAAU;AACVC,cAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD;;AAEKG,YAAAA,IAZsB,GAYY;AACtCC,cAAAA,OAAO,EAAEd,MAAM,CAACe,UADsB;AAEtCX,cAAAA,OAAO,EAAEF,EAF6B;AAGtCK,cAAAA,QAAQ,EAAEJ,EAH4B;AAItCF,cAAAA,cAAc,EAAEA,cAJsB;AAKtCe,cAAAA,gBAAgB,EAAEhB,MAAM,CAACiB,aALa;AAMtCC,cAAAA,YAAY,EAAElB,MAAM,CAACkB,YANiB;AAOtCC,cAAAA,cAAc,EAAE5B;AAPsB,aAZZ,EAsB5B;;AAtB4B;AAAA,mBAuB2BL,KAAK,CAACkC,IAAN,CAAW,kDAAX,EAA+DP,IAA/D,CAvB3B;;AAAA;AAuBtBY,YAAAA,GAvBsB;AAAA,8CAyBrBA,GAAG,CAACZ,IAzBiB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAdW,cAAc;AAAA;AAAA;AAAA,GAApB;AA4BP,OAAO,IAAME,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAO1B,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACUd,KAAK,CAACoC,GAAN,iBAAmBtB,MAAM,CAACe,UAA1B,0CADV;;AAAA;AAC1BU,YAAAA,GAD0B;AAAA,8CAGzBA,GAAG,CAACZ,IAHqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAlBa,kBAAkB;AAAA;AAAA;AAAA,GAAxB;AAMP,OAAO,IAAMC,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACoBzC,KAAK,CAACoC,GAAN,CAAU,SAAV,CADpB;;AAAA;AAClBG,YAAAA,GADkB;AAAA,8CAEjBA,GAAG,CAACZ,IAFa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVc,UAAU;AAAA;AAAA;AAAA,GAAhB","sourcesContent":["import { updateObject } from '@/store/utility';\nimport { RoomIndexRes } from '@/types/Requests/Rooms/RoomResponses';\nimport { createContext, Dispatch } from 'react';\nimport { formatTime } from '@/utils/mixins';\nimport { BookingPriceCalculatorReq } from '@/types/Requests/Booking/BookingRequests';\nimport { AxiosRes } from '@/types/Requests/ResponseTemplate';\nimport { BookingPriceCalculatorRes } from '@/types/Requests/Booking/BookingResponses';\nimport { axios } from '@/utils/axiosInstance';\nimport { ProfileInfoRes } from '@/types/Requests/Profile/ProfileResponse';\n\nexport const BookingFormContext = createContext<IBookingFormContext | any>(null);\n\nexport interface IBookingFormContext {\n  state: BookingFormState,\n  dispatch: Dispatch<BookingFormAction>\n}\n\nexport type BookingFormState = {\n  readonly room: RoomIndexRes | null;\n  readonly price?: BookingPriceCalculatorRes | null\n  readonly coupon: string;\n  readonly discount: number;\n  readonly success?: boolean;\n  readonly profile: ProfileInfoRes | null;\n}\n\nexport type BookingFormAction = { type: 'setRoom', room: RoomIndexRes, price: BookingPriceCalculatorRes }\n  | { type: 'setCoupon', coupon: string, discount: number }\n  | { type: 'removeCoupon' }\n  | { type: 'setProfile', profile: ProfileInfoRes }\n  | { type: 'setSuccess', success: boolean }\n\nexport const BookingFormStateInit: BookingFormState = {\n  room: null,\n  coupon: '',\n  discount: 0,\n  price: null,\n  profile: null,\n  success: false,\n};\n\nexport interface IBookingFormParams {\n  checkin: string;\n  checkout: string;\n  checkin_hour: number;\n  checkout_hour: number;\n  checkout_minute?: number;\n  checkin_minute?: number;\n  hosting_id: number;\n  number_guests: number;\n  booking_type: number;\n  instant_book: number;\n}\n\nexport const BookingFormReducer = (state: BookingFormState, action: BookingFormAction): BookingFormState => {\n  switch (action.type) {\n    case 'setRoom':\n      return updateObject<BookingFormState>(state, {\n        room: action.room,\n        price: action.price,\n      });\n    case 'setCoupon':\n      return updateObject<BookingFormState>(state, {\n        coupon: action.coupon,\n        discount: action.discount,\n      });\n    case 'removeCoupon':\n      return updateObject<BookingFormState>(state, {\n        coupon: '',\n        discount: 0,\n      });\n    case 'setProfile':\n      return updateObject<BookingFormState>(state, {\n        profile: action.profile,\n      });\n    case 'setSuccess':\n      return updateObject<BookingFormState>(state, {\n        success: action.success,\n      });\n    default:\n      return state;\n  }\n};\n\nexport const priceCalculator = async (params: IBookingFormParams, state: BookingFormState): Promise<any> => {\n  let additional_fee = 0;\n  let discount = 0;\n  let CI = '';\n  let CO = '';\n  try {\n    CI = formatTime(params.checkin, params.checkin_hour, params.checkin_minute);\n    CO = formatTime(params.checkout, params.checkout_hour, params.checkout_minute);\n  } catch (e) {\n    console.error(e);\n  }\n\n  const data: BookingPriceCalculatorReq = {\n    room_id: params.hosting_id,\n    checkin: CI,\n    checkout: CO,\n    additional_fee: additional_fee,\n    number_of_guests: params.number_guests,\n    booking_type: params.booking_type,\n    price_discount: discount,\n  };\n\n  // const response: AxiosRes<BookingPriceCalculatorRes> = await axios.post('bookings/price-calculator', data);\n  const response: AxiosRes<BookingPriceCalculatorRes> = await axios.post('bookings/calculate-price-with-specific-day-price', data);\n  const info: AxiosRes<RoomIndexRes> = await axios.get(`rooms/${params.hosting_id}?include=details,media,city,district`);\n\n};\n\nexport const priceCalculate = async (params: IBookingFormParams) => {\n  let additional_fee = 0;\n  let discount = 0;\n  let CI = '';\n  let CO = '';\n  try {\n    CI = formatTime(params.checkin, params.checkin_hour, params.checkin_minute);\n    CO = formatTime(params.checkout, params.checkout_hour, params.checkout_minute);\n  } catch (e) {\n    console.error(e);\n  }\n\n  const data: BookingPriceCalculatorReq = {\n    room_id: params.hosting_id,\n    checkin: CI,\n    checkout: CO,\n    additional_fee: additional_fee,\n    number_of_guests: params.number_guests,\n    booking_type: params.booking_type,\n    price_discount: discount,\n  };\n\n  // const res: AxiosRes<BookingPriceCalculatorRes> = await axios.post('bookings/price-calculator', data);\n  const res: AxiosRes<BookingPriceCalculatorRes> = await axios.post('bookings/calculate-price-with-specific-day-price', data);\n\n  return res.data;\n};\n\nexport const getRoomBookingForm = async (params: IBookingFormParams) => {\n  const res: AxiosRes<RoomIndexRes> = await axios.get(`rooms/${params.hosting_id}?include=details,media,city,district`);\n\n  return res.data;\n};\n\nexport const getProfile = async () => {\n  const res: AxiosRes<ProfileInfoRes> = await axios.get('profile');\n  return res.data;\n};\n\n"]},"metadata":{},"sourceType":"module"}